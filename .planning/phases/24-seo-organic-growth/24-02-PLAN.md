---
phase: 24-seo-organic-growth
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: [src/lib/seo.ts, src/app/page.tsx, src/app/layout.tsx]
autonomous: true
---

<objective>
Add WebSite schema with SearchAction to enable Google sitelinks search box, and add ItemList structured data for collection pages.

Purpose: WebSite schema with SearchAction enables the Google search box feature directly in search results. ItemList schema helps Google understand product collections and display rich results for category browsing.
Output: WebSite schema on homepage, ItemList schema helper in seo.ts, enhanced homepage metadata.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/lib/seo.ts
@src/app/layout.tsx
@src/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add WebSite and ItemList schema generators to seo.ts</name>
  <files>src/lib/seo.ts</files>
  <action>
  Add two new schema generator functions to the existing seo.ts file:

  1. **generateWebSiteSchema()** - WebSite schema with SearchAction:
  ```typescript
  export function generateWebSiteSchema() {
    return {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Nuage",
      "url": "https://nuage.fr",
      "description": "Boutique en ligne d'accessoires chicha haut de gamme",
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "https://nuage.fr/produits?q={search_term_string}"
        },
        "query-input": "required name=search_term_string"
      }
    };
  }
  ```
  This enables Google's sitelinks search box, pointing to the /produits page with the q= search parameter that already works.

  2. **generateItemListSchema()** - For product collections:
  ```typescript
  export function generateItemListSchema(products: Array<{
    name: string;
    url: string;
    image?: string;
    price: number;
  }>) {
    return {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "numberOfItems": products.length,
      "itemListElement": products.slice(0, 10).map((product, index) => ({
        "@type": "ListItem",
        "position": index + 1,
        "url": product.url,
        "name": product.name,
        "image": product.image,
      }))
    };
  }
  ```
  Limit to first 10 items to keep JSON-LD payload reasonable. Used by homepage featured products and category pages.

  Append these functions after the existing helpers. Do NOT modify existing functions.
  </action>
  <verify>TypeScript compiles without errors. Both functions are exported.</verify>
  <done>generateWebSiteSchema and generateItemListSchema exported from seo.ts with correct Schema.org types.</done>
</task>

<task type="auto">
  <name>Task 2: Inject WebSite schema on homepage and enhance metadata</name>
  <files>src/app/page.tsx, src/app/layout.tsx</files>
  <action>
  **Homepage (src/app/page.tsx):**

  Read the current homepage component. Add WebSite schema JSON-LD injection. Import `generateWebSiteSchema` from `@/lib/seo` and `safeJsonLd` from `@/lib/seo`. Add a `<script type="application/ld+json">` tag with the WebSite schema inside the page component's return JSX (at the top, before visible content).

  Also add page-specific metadata via `generateMetadata` or static `metadata` export if none exists. The homepage should have a richer description that mentions key product categories:
  ```typescript
  export const metadata: Metadata = {
    title: "Nuage | L'art de la detente - Chicha Premium en France",
    description: "Boutique en ligne de chichas et accessoires haut de gamme. Chichas, bols, tuyaux, charbon et accessoires de qualite superieure. Livraison en France.",
    alternates: {
      canonical: "https://nuage.fr",
    },
  };
  ```

  **Root layout (src/app/layout.tsx):**
  Keep existing Organization schema. No changes needed here since WebSite schema goes on homepage specifically.

  Important: Do NOT remove or modify the existing Organization schema in layout.tsx. The WebSite schema is separate and goes on the homepage page component.
  </action>
  <verify>Dev server compiles. Homepage source contains both Organization schema (from layout) and WebSite schema (from page). Inspect page source to verify two JSON-LD blocks exist.</verify>
  <done>Homepage has WebSite schema with SearchAction for Google sitelinks search box. Homepage metadata includes richer title and description with canonical URL.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Dev server compiles without TypeScript errors
- [ ] Homepage HTML contains WebSite schema JSON-LD with SearchAction
- [ ] Homepage HTML still contains Organization schema JSON-LD from layout
- [ ] generateItemListSchema is available for future use
- [ ] Homepage title/description enhanced with SEO keywords
- [ ] No regressions in existing functionality
</verification>

<success_criteria>

- WebSite schema with SearchAction renders on homepage
- ItemList schema generator available in seo.ts for category pages
- Homepage metadata enhanced with better title, description, and canonical
- All TypeScript compiles cleanly
- No changes to existing schema generators or layout behavior
  </success_criteria>

<output>
After completion, create `.planning/phases/24-seo-organic-growth/24-02-SUMMARY.md`
</output>
