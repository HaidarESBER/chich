---
phase: 14-blog-content-marketing
plan: 02
type: execute
wave: 2
depends_on: ["14-01"]
files_modified: [src/app/blog/layout.tsx, src/app/blog/page.tsx, src/app/blog/[slug]/page.tsx, content/blog/guide-chicha.mdx, content/blog/entretien-hookah.mdx, src/components/layout/Header.tsx, src/components/layout/Footer.tsx]
autonomous: true
domain: next-js
---

<objective>
Build blog pages, create sample French hookah content, and integrate blog navigation into the site.

Purpose: Deliver the complete user-facing blog experience — browsable index, readable posts with SEO, and discoverable via site navigation.
Output: Working blog at /blog with 2 sample posts, Article JSON-LD, and Blog links in header/footer.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-blog-content-marketing/14-RESEARCH.md
@.planning/phases/14-blog-content-marketing/14-01-SUMMARY.md

@src/app/layout.tsx
@src/lib/blog.ts
@src/lib/seo.ts
@src/types/blog.ts
@src/components/layout/Header.tsx
@src/components/layout/Footer.tsx
@mdx-components.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create blog routes and layout with sample content</name>
  <files>src/app/blog/layout.tsx, src/app/blog/page.tsx, src/app/blog/[slug]/page.tsx, content/blog/guide-chicha.mdx, content/blog/entretien-hookah.mdx</files>
  <action>
1. Create content/blog/ directory with 2 sample MDX posts:

   **content/blog/guide-chicha.mdx:**
   - Use `export const metadata = { ... }` pattern (NOT YAML frontmatter — avoids rendering issues per research pitfall 5)
   - Title: "Guide Complet de la Chicha : Tout Savoir pour Debuter"
   - Description: A comprehensive beginner's guide in French (~400 words of real content)
   - Category: 'guide', author: 'Nuage', date: '2026-02-15'
   - Content sections: Introduction, Qu'est-ce qu'une chicha, Les composants essentiels, Comment preparer votre chicha, Conseils pour debutants

   **content/blog/entretien-hookah.mdx:**
   - Title: "L'Entretien de Votre Hookah : Guide Pratique"
   - Description: Practical maintenance guide in French (~350 words)
   - Category: 'conseils', author: 'Nuage', date: '2026-02-14'
   - Content sections: Introduction, Nettoyage apres chaque session, Entretien hebdomadaire, Quand remplacer les pieces

   IMPORTANT: Both posts use `export const metadata = {}` at top of MDX file for metadata. Also include YAML frontmatter (--- block) WITH remark-frontmatter if needed for gray-matter parsing by the blog listing utility. The dual approach works: gray-matter reads frontmatter for the index, MDX export provides metadata for the post page.

   Actually, simpler approach: Use ONLY `export const metadata = {}` in MDX files. Update src/lib/blog.ts to use dynamic import to read metadata instead of gray-matter for consistency. OR keep gray-matter approach and add YAML frontmatter to MDX files (gray-matter strips it before MDX compilation since we read raw files in blog.ts).

   Best approach: Add YAML frontmatter to MDX files for gray-matter extraction in blog.ts (which reads raw file content), AND add `export const metadata = {}` in the MDX body for use in the [slug] page via dynamic import. Keep both in sync. The frontmatter won't render because gray-matter strips it when reading, and @next/mdx will need remark-frontmatter to suppress it in rendered output — BUT since we're using dynamic import pattern and not directly rendering the raw file, the frontmatter between --- delimiters in MDX won't cause issues if we handle it properly.

   SIMPLEST approach: Use ONLY `export const metadata = {}` pattern in MDX files (as shown in research code_examples). In blog.ts, use dynamic import (or regex extraction) to read metadata for listing. This avoids the frontmatter rendering pitfall entirely.

   FINAL DECISION: Use `export const metadata = {}` at the top of each MDX file. In src/lib/blog.ts, read raw file content and use a simple regex to extract the metadata export, then parse it. Or better: use gray-matter with custom delimiters that won't conflict.

   Actually, the cleanest approach per the research: Use YAML frontmatter in MDX files. blog.ts reads raw files with gray-matter (strips frontmatter correctly). For the [slug]/page.tsx, use dynamic import which provides the MDX component + exported metadata. In the MDX files, include BOTH: YAML frontmatter at top (for blog.ts listing) AND `export const metadata = {}` (for dynamic import in page). Keep them in sync. The YAML frontmatter won't render because @next/mdx with the right setup handles it — OR we add the `remark-frontmatter` plugin to suppress it.

   DECISION: Use the approach from research Pattern 2: MDX files have YAML frontmatter. blog.ts reads raw files via fs + gray-matter for the listing page. [slug]/page.tsx uses dynamic import and reads the exported metadata. Each MDX file has BOTH frontmatter AND export const metadata. Install `remark-frontmatter` to prevent the YAML from rendering as text. Add it to next.config.ts remarkPlugins.

2. Create src/app/blog/layout.tsx:
   - Server component (no "use client")
   - Wrap children in a container div with max-w-3xl mx-auto px-4 py-12
   - Apply Tailwind Typography prose classes: `prose prose-lg prose-stone` (stone matches the brand color palette)
   - Customize prose colors to match Nuage brand: prose-headings:font-heading (Cormorant Garamond), prose-headings:text-primary, prose-a:text-accent, prose-a:hover:text-accent-dark
   - Add a "Le Blog Nuage" header section above the prose content (visible on both index and post pages)

3. Create src/app/blog/page.tsx:
   - Server component
   - Import getAllPosts from @/lib/blog
   - Export metadata with title: "Blog | Nuage", description for SEO
   - Render a grid of blog post cards: each card shows title, description, date, reading time, category badge
   - Link each card to /blog/[slug]
   - Style cards with the existing Nuage aesthetic: bg-background-card, rounded, hover effect, Cormorant Garamond headings
   - Show "Aucun article pour le moment" if no posts

4. Create src/app/blog/[slug]/page.tsx:
   - Server component with async params (Next.js 16 pattern: params is Promise)
   - Import getPostBySlug, getPostSlugs from @/lib/blog
   - Import generateArticleSchema from @/lib/seo
   - Export generateStaticParams() using getPostSlugs()
   - Export dynamicParams = false (404 for non-existent slugs)
   - Export generateMetadata() for dynamic title/description/openGraph per post
   - Dynamic import: `const { default: Post, metadata } = await import(\`@/content/blog/${slug}.mdx\`)`
   - Render: article header (title, date, reading time, category), Post component, JSON-LD script tag with generateArticleSchema
   - Add breadcrumb navigation: Blog > Post Title

5. Install remark-frontmatter if needed:
   ```
   npm install remark-frontmatter
   ```
   Add to next.config.ts remarkPlugins to suppress YAML frontmatter rendering in MDX.
  </action>
  <verify>npm run build succeeds AND generates static pages for /blog, /blog/guide-chicha, /blog/entretien-hookah</verify>
  <done>Blog index at /blog lists 2 posts sorted by date. Each post renders with prose typography, Article JSON-LD, proper metadata. Static generation works for all blog routes.</done>
</task>

<task type="auto">
  <name>Task 2: Add Blog navigation links to Header and Footer</name>
  <files>src/components/layout/Header.tsx, src/components/layout/Footer.tsx</files>
  <action>
1. Update Header.tsx desktop navigation:
   - Add a "Blog" link between "Produits" and the wishlist button in the desktop nav
   - Use same styling pattern as "Produits" link: text-sm font-medium, isHomepage-aware color switching (white on homepage, primary on other pages)
   - Link to /blog

2. Update Header.tsx mobile navigation:
   - Add "Blog" link in the mobile menu overlay, between "Tous les Produits" section and "Favoris"
   - Use same styling pattern as other mobile nav links
   - Highlight with text-accent when pathname starts with '/blog'

3. Update Footer.tsx Navigation column:
   - Add "Blog" link in the Navigation column (Column 2), after "Produits" and before "Panier"
   - Use same motion.span pattern with underline hover effect as other footer links
  </action>
  <verify>npm run build succeeds. Visually confirm Blog link appears in navigation by checking the built HTML output or running dev server.</verify>
  <done>Blog link visible in header (desktop + mobile) and footer navigation. Links correctly to /blog. Active state highlights when on blog pages.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] /blog page lists both posts with correct metadata
- [ ] /blog/guide-chicha renders full article with prose styling
- [ ] /blog/entretien-hookah renders full article with prose styling
- [ ] JSON-LD Article schema present in blog post page source
- [ ] Blog link appears in header and footer navigation
- [ ] Static generation works (no server-side rendering for blog routes)
</verification>

<success_criteria>

- All blog routes render correctly
- Posts display with Tailwind Typography prose styling
- Article JSON-LD present on each post page
- Blog discoverable via Header and Footer navigation
- Static generation enabled for all blog pages
- No build errors or TypeScript warnings
  </success_criteria>

<output>
After completion, create `.planning/phases/14-blog-content-marketing/14-02-SUMMARY.md`
</output>
