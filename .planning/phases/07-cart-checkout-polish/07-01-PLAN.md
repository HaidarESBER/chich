---
phase: 07-cart-checkout-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/components/cart/CartItem.tsx, src/components/cart/CartSummary.tsx, src/components/checkout/CheckoutForm.tsx, src/app/panier/page.tsx]
autonomous: false
---

<objective>
Transform cart and checkout interactions with smooth animations, satisfying feedback, and polished micro-interactions.

Purpose: Elevate the shopping experience from functional to delightful, reinforcing the premium brand through motion design in the conversion funnel.
Output: Animated cart operations (add/remove/update), smooth checkout flow transitions, success feedback animations.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-motion-foundation/05-01-SUMMARY.md
@.planning/phases/06-product-experience/06-01-SUMMARY.md

# Framer Motion foundation available from Phase 5
# Motion patterns established: viewport intersection, staggered animations, 300-600ms durations
# Hybrid SSG pattern from Phase 6 for interactive components

@src/components/cart/CartItem.tsx
@src/components/cart/CartSummary.tsx
@src/components/checkout/CheckoutForm.tsx
@src/app/panier/page.tsx
@src/contexts/CartContext.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Animate cart item list with staggered entrance and removal</name>
  <files>src/app/panier/page.tsx, src/components/cart/CartItem.tsx</files>
  <action>
Convert cart page items section to use AnimatePresence with layout animations. Wrap CartItem map in motion.div with initial={{opacity: 0, y: 20}}, animate={{opacity: 1, y: 0}}, exit={{opacity: 0, x: -20}} (slide left on remove), layout prop for smooth reordering. Add staggerChildren: 0.1 to parent. Use key={item.product.id} for proper exit animations. Wrap CartItem component content in motion.div with layout prop to animate position changes when quantity updates affect height. Preserve existing responsive grid layout.
  </action>
  <verify>npm run build succeeds, visit /panier, add/remove items and confirm smooth fade-in entrance, slide-out removal, and reordering animations</verify>
  <done>Cart items animate in with stagger on page load, slide left smoothly when removed, reorder smoothly when quantities change</done>
</task>

<task type="auto">
  <name>Task 2: Add smooth quantity button feedback and number transitions</name>
  <files>src/components/cart/CartItem.tsx</files>
  <action>
Add whileTap={{scale: 0.95}} to quantity +/- buttons for tactile feedback. Wrap quantity number display in AnimatePresence with motion.span that has key={quantity}, initial={{opacity: 0, y: -10}}, animate={{opacity: 1, y: 0}}, exit={{opacity: 0, y: 10}} (flip up on increase, down on decrease), transition={{duration: 0.2}}. This creates satisfying number flip effect when quantity changes. Keep button transitions at 0.2s (quicker than page transitions) for responsive feel. Preserve existing border/hover styles.
  </action>
  <verify>npm run build succeeds, click +/- buttons and confirm button press feedback, quantity number flips smoothly with directional animation</verify>
  <done>Quantity buttons give tactile scale feedback on press, number animates up/down when changing, feels responsive and premium</done>
</task>

<task type="auto">
  <name>Task 3: Animate empty cart state and CartSummary transitions</name>
  <files>src/components/cart/CartSummary.tsx</files>
  <action>
Wrap CartSummary return content in AnimatePresence with mode="wait". Create two separate motion.div blocks: one for empty state (items.length === 0) with key="empty", another for summary (items.length > 0) with key="summary". Both should have initial={{opacity: 0, scale: 0.95}}, animate={{opacity: 1, scale: 1}}, exit={{opacity: 0, scale: 0.95}}, transition={{duration: 0.3}}. This creates smooth crossfade when cart goes from empty to filled or vice versa. Empty cart icon should fade in with delay: initial={{opacity: 0, scale: 0.8}}, animate={{opacity: 1, scale: 1}}, transition={{delay: 0.2, duration: 0.4}} for emphasis. Preserve existing styling and button variants.
  </action>
  <verify>npm run build succeeds, empty cart then add item confirms smooth crossfade from empty state to summary, remove all items confirms reverse transition</verify>
  <done>Cart summary smoothly transitions between empty and filled states with scale+fade animation, empty cart icon has subtle emphasis entrance</done>
</task>

<task type="auto">
  <name>Task 4: Add checkout form field focus animations</name>
  <files>src/components/checkout/CheckoutForm.tsx</files>
  <action>
Convert CheckoutForm component to use Framer Motion for form field animations. Wrap shipping form section and notes textarea in motion.div containers with initial={{opacity: 0, y: 10}}, animate={{opacity: 1, y: 0}}, transition={{duration: 0.4, staggerChildren: 0.05}} to create cascading entrance when form loads. Add whileFocus={{scale: 1.01}} to submit button for subtle growth on hover (not tap - save that for click feedback). When isSubmitting changes to true, animate submit button content with initial={{opacity: 1}}, animate={{opacity: 0.7}}, transition={{duration: 0.2}}. Do NOT animate individual input fields (causes focus issues) - only animate containers and button states. Preserve all existing validation logic and error displays.
  </action>
  <verify>npm run build succeeds, visit /commande with items in cart, confirm form sections fade in with stagger, submit button scales subtly on hover, loading state transitions smoothly</verify>
  <done>Checkout form sections cascade in smoothly, submit button has polished hover feedback, loading transition is smooth and clear</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Animated cart and checkout flows with staggered lists, quantity feedback, and smooth transitions</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000/produits
    3. Add multiple products to cart (2-3 items)
    4. Visit: http://localhost:3000/panier
    5. Cart page: Verify items fade in with stagger effect on load
    6. Click +/- buttons: Verify button press feedback and number flip animations
    7. Remove an item: Verify it slides left and remaining items reorder smoothly
    8. Remove all items: Verify smooth transition to empty cart state with icon emphasis
    9. Add item again: Verify smooth transition from empty to filled summary
    10. Click "Passer la commande": Visit checkout page
    11. Checkout page: Verify form sections cascade in smoothly
    12. Hover submit button: Verify subtle scale effect
    13. Fill form and submit: Verify loading state transition is smooth
    14. Check mobile (375px): Verify all animations work on touch, no jank
    15. Confirm: All animations feel polished and premium (not distracting or slow)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds
- [ ] Cart items animate in/out smoothly
- [ ] Quantity controls have tactile feedback
- [ ] Empty/filled cart transitions are smooth
- [ ] Checkout form has polished entrance
- [ ] All animations work on mobile/touch
- [ ] No console errors or performance issues
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- User approved animation quality and timing
- No errors or warnings introduced
- Cart and checkout feel premium and polished with satisfying micro-interactions
  </success_criteria>

<output>
After completion, create `.planning/phases/07-cart-checkout-polish/07-01-SUMMARY.md`
</output>
