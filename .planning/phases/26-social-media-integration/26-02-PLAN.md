---
phase: 26-social-media-integration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: [src/components/social/InstagramFeed.tsx, src/lib/instagram.ts, src/app/api/instagram/feed/route.ts, src/app/page.tsx, .env.local]
autonomous: false
---

<objective>
Integrate Instagram feed display to show social proof and drive Instagram followers.

Purpose: Showcase product usage in real-world context through Instagram posts. Social proof increases trust and conversion, Instagram CTA drives followers.
Output: Working Instagram feed on homepage with cached posts and admin configuration.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Tech stack:
- Next.js 15 App Router with Route Handlers for API
- Server-side data fetching preferred
- Client components for interactive UI
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <action>Set up Instagram Basic Display API credentials</action>
  <instructions>
    To display Instagram posts, we need API access. Follow these steps:

    1. Go to https://developers.facebook.com/apps
    2. Create a new app, select "Other" use case
    3. Add "Instagram Basic Display" product
    4. Create an Instagram App ID and secret
    5. Add test user (your Instagram account)
    6. Authorize your account and get a long-lived access token
    7. Provide the following:
       - INSTAGRAM_ACCESS_TOKEN (long-lived token, valid 60 days)
       - INSTAGRAM_USER_ID (your Instagram user ID)

    I'll create .env.local placeholder for you to fill in.
  </instructions>
  <verification>Environment variables set in .env.local</verification>
  <resume-signal>Type "done" when credentials are added to .env.local</resume-signal>
</task>

<task type="auto">
  <name>Task 1: Create Instagram API client library</name>
  <files>src/lib/instagram.ts, .env.local</files>
  <action>Create Instagram client library using Instagram Basic Display API. Functions: getRecentMedia(limit = 12) fetches media with id, caption, media_type (IMAGE, VIDEO, CAROUSEL_ALBUM), media_url, permalink, timestamp. Use fetch with long-lived access token from env. Return type InstagramPost[]. Handle errors gracefully (return empty array if API fails, log error). Add comment about token refresh (60-day expiry, refresh before expiry). Cache results for 1 hour to avoid rate limits. Create .env.local template with INSTAGRAM_ACCESS_TOKEN and INSTAGRAM_USER_ID placeholders if file doesn't exist.</action>
  <verify>Instagram client library exports getRecentMedia function, handles errors gracefully</verify>
  <done>Instagram API integration ready to fetch posts</done>
</task>

<task type="auto">
  <name>Task 2: Create API route for Instagram feed with caching</name>
  <files>src/app/api/instagram/feed/route.ts</files>
  <action>Create GET /api/instagram/feed route handler. Call getRecentMedia(12), return JSON response with posts array. Implement server-side caching with Next.js cache revalidation (revalidate: 3600 = 1 hour) or in-memory cache. Handle errors: if Instagram API fails, return cached data if available, otherwise return {posts: [], error: 'Feed temporarily unavailable'}. Add CORS headers for client access. Use 'force-dynamic' export to prevent static generation. Response type: {posts: InstagramPost[], cachedAt?: string}.</action>
  <verify>GET /api/instagram/feed returns posts array or empty array on error</verify>
  <done>Instagram feed API endpoint works with caching</done>
</task>

<task type="auto">
  <name>Task 3: Create InstagramFeed component</name>
  <files>src/components/social/InstagramFeed.tsx</files>
  <action>Create client component InstagramFeed that fetches from /api/instagram/feed. Display grid of Instagram posts (4 columns desktop, 2 mobile) with images, hover overlay showing caption excerpt (first 100 chars). Each post links to Instagram permalink (target="_blank" rel="noopener noreferrer"). Show loading skeleton (shimmer effect). Handle empty state gracefully (don't show section if no posts). Include "Follow us on Instagram" CTA button linking to Instagram profile. Use Framer Motion for stagger animation on load. Responsive: 4 cols (lg), 3 cols (md), 2 cols (sm). Style with Tailwind, maintain brand aesthetic (accent colors, rounded corners).</action>
  <verify>InstagramFeed renders grid of posts with images and links to Instagram</verify>
  <done>Instagram feed component displays posts with professional design</done>
</task>

<task type="auto">
  <name>Task 4: Integrate Instagram feed on homepage</name>
  <files>src/app/page.tsx</files>
  <action>Add InstagramFeed component to homepage after featured products section, before footer. Wrap in section with heading "Nuage sur Instagram" or "@nuage_officiel". Use Container component for consistent width. Add subtle background (bg-background-secondary/30) to distinguish section. Ensure section only renders if Instagram posts exist (component handles this internally). Order: Hero → Categories → Featured Products → Instagram Feed → Newsletter (if exists) → Footer.</action>
  <verify>Instagram feed visible on homepage with heading and proper spacing</verify>
  <done>Homepage displays Instagram feed in cohesive layout</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds
- [ ] Instagram API credentials set in .env.local
- [ ] GET /api/instagram/feed returns posts (or empty array)
- [ ] InstagramFeed component renders on homepage
- [ ] Posts link to Instagram correctly
- [ ] Grid layout responsive (4-col desktop, 2-col mobile)
- [ ] Loading states work
- [ ] Empty state handled gracefully
- [ ] "Follow on Instagram" CTA present
</verification>

<success_criteria>

- All tasks completed
- Instagram feed displays on homepage
- Posts fetch and cache correctly
- Component handles errors gracefully
- Responsive design works across devices
- Links to Instagram profile functional
- No TypeScript errors
  </success_criteria>

<output>
After completion, create `.planning/phases/26-social-media-integration/26-02-SUMMARY.md`
</output>
